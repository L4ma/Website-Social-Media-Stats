{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion}from'framer-motion';import{Calendar,Database,RefreshCw,Info}from'lucide-react';import{dataCollectionService}from'../services/dataCollectionService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DataCollectionStatus=()=>{const[historicalData,setHistoricalData]=useState(null);const[isCollecting,setIsCollecting]=useState(false);const[lastCollection,setLastCollection]=useState(null);useEffect(()=>{loadData();},[]);const loadData=()=>{const data=dataCollectionService.getHistoricalData();setHistoricalData(data);const lastCollectionDate=localStorage.getItem('youtube_daily_collection');setLastCollection(lastCollectionDate);};const handleManualCollection=async()=>{setIsCollecting(true);try{await dataCollectionService.collectDailyData();loadData();}catch(error){console.error('Error collecting data:',error);}finally{setIsCollecting(false);}};const shouldCollectToday=dataCollectionService.shouldCollectToday();const dataPointsCount=(historicalData===null||historicalData===void 0?void 0:historicalData.dailyStats.length)||0;return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"bg-white rounded-xl shadow-lg p-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Database,{className:\"w-5 h-5 text-blue-600\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Data Collection Status\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleManualCollection,disabled:isCollecting,className:\"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:`w-4 h-4 ${isCollecting?'animate-spin':''}`}),/*#__PURE__*/_jsx(\"span\",{children:isCollecting?'Collecting...':'Collect Now'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-2\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-blue-900\",children:\"Data Points\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-900\",children:dataPointsCount}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-700\",children:\"Historical records\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-2\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 text-green-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-green-900\",children:\"Last Collection\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-bold text-green-900\",children:lastCollection?new Date(lastCollection).toLocaleDateString():'Never'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-green-700\",children:shouldCollectToday?'Ready to collect':'Already collected today'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-2\",children:[/*#__PURE__*/_jsx(Info,{className:\"w-4 h-4 text-purple-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-purple-900\",children:\"Status\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-bold text-purple-900\",children:shouldCollectToday?'Ready':'Up to date'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-purple-700\",children:shouldCollectToday?'Can collect today\\'s data':'Today\\'s data collected'})]})]}),dataPointsCount===0&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},className:\"mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Info,{className:\"w-4 h-4 text-yellow-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-yellow-900\",children:\"No Historical Data\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-yellow-700\",children:\"Start collecting daily data to build up historical charts. Data will be collected automatically when you visit this page daily.\"})]})]})}),dataPointsCount>0&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},className:\"mt-4 p-4 bg-green-50 rounded-lg border border-green-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Database,{className:\"w-4 h-4 text-green-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-green-900\",children:\"Historical Data Available\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-green-700\",children:\"Charts will show real historical data where available. Missing periods will show zero or estimated data.\"})]})]})})]});};export default DataCollectionStatus;","map":{"version":3,"names":["React","useState","useEffect","motion","Calendar","Database","RefreshCw","Info","dataCollectionService","jsx","_jsx","jsxs","_jsxs","DataCollectionStatus","historicalData","setHistoricalData","isCollecting","setIsCollecting","lastCollection","setLastCollection","loadData","data","getHistoricalData","lastCollectionDate","localStorage","getItem","handleManualCollection","collectDailyData","error","console","shouldCollectToday","dataPointsCount","dailyStats","length","div","initial","opacity","y","animate","className","children","onClick","disabled","Date","toLocaleDateString"],"sources":["/Users/marcodamm/Desktop/Stats_SocialMedia/src/components/DataCollectionStatus.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Calendar, Database, RefreshCw, Info } from 'lucide-react';\nimport { dataCollectionService, HistoricalData } from '../services/dataCollectionService';\n\nconst DataCollectionStatus: React.FC = () => {\n  const [historicalData, setHistoricalData] = useState<HistoricalData | null>(null);\n  const [isCollecting, setIsCollecting] = useState(false);\n  const [lastCollection, setLastCollection] = useState<string | null>(null);\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = () => {\n    const data = dataCollectionService.getHistoricalData();\n    setHistoricalData(data);\n    \n    const lastCollectionDate = localStorage.getItem('youtube_daily_collection');\n    setLastCollection(lastCollectionDate);\n  };\n\n  const handleManualCollection = async () => {\n    setIsCollecting(true);\n    try {\n      await dataCollectionService.collectDailyData();\n      loadData();\n    } catch (error) {\n      console.error('Error collecting data:', error);\n    } finally {\n      setIsCollecting(false);\n    }\n  };\n\n  const shouldCollectToday = dataCollectionService.shouldCollectToday();\n  const dataPointsCount = historicalData?.dailyStats.length || 0;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"bg-white rounded-xl shadow-lg p-6 mb-6\"\n    >\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"flex items-center space-x-2\">\n          <Database className=\"w-5 h-5 text-blue-600\" />\n          <h3 className=\"text-lg font-semibold text-gray-900\">Data Collection Status</h3>\n        </div>\n        <button\n          onClick={handleManualCollection}\n          disabled={isCollecting}\n          className=\"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\n        >\n          <RefreshCw className={`w-4 h-4 ${isCollecting ? 'animate-spin' : ''}`} />\n          <span>{isCollecting ? 'Collecting...' : 'Collect Now'}</span>\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <div className=\"bg-blue-50 rounded-lg p-4\">\n          <div className=\"flex items-center space-x-2 mb-2\">\n            <Calendar className=\"w-4 h-4 text-blue-600\" />\n            <span className=\"text-sm font-medium text-blue-900\">Data Points</span>\n          </div>\n          <p className=\"text-2xl font-bold text-blue-900\">{dataPointsCount}</p>\n          <p className=\"text-xs text-blue-700\">Historical records</p>\n        </div>\n\n        <div className=\"bg-green-50 rounded-lg p-4\">\n          <div className=\"flex items-center space-x-2 mb-2\">\n            <Calendar className=\"w-4 h-4 text-green-600\" />\n            <span className=\"text-sm font-medium text-green-900\">Last Collection</span>\n          </div>\n          <p className=\"text-sm font-bold text-green-900\">\n            {lastCollection ? new Date(lastCollection).toLocaleDateString() : 'Never'}\n          </p>\n          <p className=\"text-xs text-green-700\">\n            {shouldCollectToday ? 'Ready to collect' : 'Already collected today'}\n          </p>\n        </div>\n\n        <div className=\"bg-purple-50 rounded-lg p-4\">\n          <div className=\"flex items-center space-x-2 mb-2\">\n            <Info className=\"w-4 h-4 text-purple-600\" />\n            <span className=\"text-sm font-medium text-purple-900\">Status</span>\n          </div>\n          <p className=\"text-sm font-bold text-purple-900\">\n            {shouldCollectToday ? 'Ready' : 'Up to date'}\n          </p>\n          <p className=\"text-xs text-purple-700\">\n            {shouldCollectToday ? 'Can collect today\\'s data' : 'Today\\'s data collected'}\n          </p>\n        </div>\n      </div>\n\n      {dataPointsCount === 0 && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          className=\"mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200\"\n        >\n          <div className=\"flex items-center space-x-2\">\n            <Info className=\"w-4 h-4 text-yellow-600\" />\n            <div>\n              <p className=\"text-sm font-medium text-yellow-900\">No Historical Data</p>\n              <p className=\"text-xs text-yellow-700\">\n                Start collecting daily data to build up historical charts. Data will be collected automatically when you visit this page daily.\n              </p>\n            </div>\n          </div>\n        </motion.div>\n      )}\n\n      {dataPointsCount > 0 && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          className=\"mt-4 p-4 bg-green-50 rounded-lg border border-green-200\"\n        >\n          <div className=\"flex items-center space-x-2\">\n            <Database className=\"w-4 h-4 text-green-600\" />\n            <div>\n              <p className=\"text-sm font-medium text-green-900\">Historical Data Available</p>\n              <p className=\"text-xs text-green-700\">\n                Charts will show real historical data where available. Missing periods will show zero or estimated data.\n              </p>\n            </div>\n          </div>\n        </motion.div>\n      )}\n    </motion.div>\n  );\n};\n\nexport default DataCollectionStatus; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}